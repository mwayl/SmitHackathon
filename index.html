<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>
<body>
    <div class="header">
        <h1 class="main-heading">Personal Blogging App</h1>
        <button class="log-out"><a class="login-link" href="login.html">Log in</a></button>
      </div>
      <div class="inner-header">
        <h1 class="heading-of-Page">Good Morning Readers</h1>
      </div>
      <div class="postDisplay" id="postDisplayGrid">
      <div class="allBlog">All Blogs</div>


       <!-- <div class="post">
        <div class="picture"></div>
        <div class="heading">An Action Button Could Be Coming To The iphone 15</div>
        <div class="information">Muhammad Wayl - August 16th,2023</div>
        <div class="post-description">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!</div>
         <button type="button" class="deleteButton" id="delete">Delete</button>
         <button type="button" class="EditButton" id="delete">Edit</button>
    </div>
    <div class="post">
        <div class="picture"></div>
        <div class="heading">An Action Button Could Be Coming To The iphone 15</div>
        <div class="information">Muhammad Wayl - August 16th,2023</div>
        <div class="post-description">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!</div>
         <button type="button" class="deleteButton" id="delete">Delete</button>
         <button type="button" class="EditButton" id="delete">Edit</button>
    </div>
    <div class="post">
        <div class="picture"></div>
        <div class="heading">An Action Button Could Be Coming To The iphone 15</div>
        <div class="information">Muhammad Wayl - August 16th,2023</div>
        <div class="post-description">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!</div>
         <button type="button" class="deleteButton" id="delete">Delete</button>
         <button type="button" class="EditButton" id="delete">Edit</button>
    </div>
    <div class="post">
        <div class="picture"></div>
        <div class="heading">An Action Button Could Be Coming To The iphone 15</div>
        <div class="information">Muhammad Wayl - August 16th,2023</div>
        <div class="post-description">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nihil dolore illo aperiam fuga deserunt ab incidunt aliquid nesciunt repellendus, at eveniet delectus, alias quaerat eos quas ut, porro sunt consequatur!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!Lorem ipsum, dolor sit amet consectetur adipisicing elit. Vitae voluptatum, alias incidunt, libero odit laboriosam ipsum maiores in similique, quam fuga. Autem obcaecati quaerat dolores praesentium sequi aut, quas ut!</div>
         <button type="button" class="deleteButton" id="delete">Delete</button>
         <button type="button" class="EditButton" id="delete">Edit</button>
    </div>  -->
</div>



    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { collection, addDoc, getFirestore,
            getDocs, onSnapshot, serverTimestamp,
            query, orderBy, deleteDoc, doc, updateDoc} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
        
            const firebaseConfig = {
    apiKey: "AIzaSyCdWSJY_WIVbMAOW8bwEpGhrn2-g6zLefM",
    authDomain: "smit-hackaton-project.firebaseapp.com",
    projectId: "smit-hackaton-project",
    storageBucket: "smit-hackaton-project.appspot.com",
    messagingSenderId: "17540766910",
    appId: "1:17540766910:web:ebbb56ad74a6896f3892ef",
    measurementId: "G-DZ1RRJ6ZFN"
  };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);




//get the data from the firebase firestore

        document.addEventListener("readystatechange",async (event) => {
            console.log(`readystate: ${document.readyState}`)
        if (document.readyState === "complete") {
            // const q = query(collection(db, "posts"), orderBy("createdAt", "desc"));
            const q = collection(db, "posts");
            // const unsubscribe = onSnapshot(q,async (querySnapshot) => {
                const querySnapshot = await getDocs(q);
                const postGrid = document.querySelector("#postDisplayGrid");
                postGrid.innerHTML = '';
                // console.log(doc)
                console.log(querySnapshot.size);
               

                querySnapshot.forEach(function (doc) {
                    
                        const data = doc.data();
                        const postId = doc.id;
                          console.log(data)
                          console.log(postId)
    //                  
      const postDiv=document.createElement('div');
      const posting=`
        <div class="picture"></div>
        <div class="heading">${data.heading}</div>
        <div class="information">Muhammad Wayl - August 16th,2023</div>
        <div class="post-description">${data.description}</div>
        
    `
    //
    // <div class="post"  data-id="${postId}>
    postDiv.innerHTML =posting
    postDiv.classList.add("post")
    postGrid.appendChild(postDiv)

                    });

                }

            })
                

//         window.editBook = (docId, heading, description) => {
//     const box = document.getElementById("editing");
//     box.style.display = "block";
//     const editBox = document.createElement('div');
//     const edit = `<form onsubmit="completeEdit(event, '${docId}')">
//         <label style="font-size:14px; margin-left:10px">Name *</label>
//         <input type="text" name="blog" placeholder="blog" id="editboxOfPost" value="${heading}">
//         <p id="descriptionHeading">Description</p>
//         <textarea name="Description" id="editDiscriptionOfPost" rows="6" placeholder="Enter Description of Blog">${description}</textarea>
//         <button id="editingSubmit" value="submit">Submit</button>
//     </form>`;
//     editBox.innerHTML = edit;
//     box.appendChild(editBox);
// };

// window.completeEdit = async (e, docId) => {
//     alert("Complete");
//     e.preventDefault();
//     console.log("completeEdit called: ", docId);

//     console.log("e.target.blog: ", e.target.blog.value);
//     console.log("e.target.Description: ", e.target.Description.value);

//     // Assuming you have an 'updateDoc' function defined elsewhere
//     await updateDoc(doc(db, 'posts', docId), {
//         heading: e.target.blog.value,
//         description: e.target.Description.value,
//     });

//     console.log("Edit Book id is:", docId);
// };















//                 window.deleteBook = async (docId) => {
//   try {
//     const postRef = doc(db, "posts", docId);

//     // Delete the post document
//     await deleteDoc(postRef);

//     console.log("Post deleted successfully");
//   } 
//   catch (error) {
//     console.error("Error deleting post:", error);
//   }
// };


       
//     });
</script>
    
</body>
</html>